(()=>{"use strict";var t,e=(t={},{on:function(e,n){t[e]=t[e]||[],t[e].push(n)},off:function(e,n){if(t[e])for(var d=0;d<t[e].length;d++)if(t[e][d]===n){t[e].splice(d,1);break}},emit:function(e,n){t[e]&&t[e].forEach((function(t){t(n)}))},printEvents:function(){console.log(t)}});class n{constructor(t){this.title=t,this.tasks={}}addTask(t){this.tasks[t.title]=t}}class d{constructor(t,e,n){this.title=t,this.description=e,this.dueDate=n}}(function(){const t=document.querySelector(".overlay");function c(){t.textContent="",t.classList.add("hidden")}function s(e){const n=document.createElement("div");n.classList.add("form-container");const d=document.createElement("p");d.classList.add("form-close-btn");const s=document.createElement("i");s.classList.add("fa"),s.classList.add("fa-remove"),d.appendChild(s),d.addEventListener("click",c),d.appendChild(s),n.appendChild(d);const o=document.createElement("h2");n.appendChild(o);const i=document.createElement("form"),l=document.createElement("input");l.setAttribute("type","text"),l.required=!0,i.appendChild(l),n.appendChild(i);const r=document.createElement("input");r.setAttribute("type","submit");const p=[...e.classList];if(p.includes("add-project-btn")&&(n.classList.add("new-project-form-container"),o.textContent="Add New Project",i.classList.add("new-project-form"),l.placeholder="Project Name",r.value="Add Project"),p.includes("add-task-btn")){n.classList.add("new-task-form-container"),o.textContent="Add New Task",i.classList.add("new-task-form"),l.placeholder="Title";const t=document.createElement("input");t.setAttribute("type","text"),t.placeholder="Description",i.appendChild(t);const e=document.createElement("div");e.classList.add("due-date-container");const d=document.createElement("label");d.setAttribute("for","due-date"),d.textContent="Due Date: ";const c=document.createElement("input");c.setAttribute("type","date"),c.id="due-date",c.placeholder="Due Date",e.appendChild(d),e.appendChild(c),i.appendChild(e),r.value="Add Task"}i.addEventListener("submit",a),i.appendChild(r),t.appendChild(n),t.classList.toggle("hidden")}function a(t){t.preventDefault();const s=t.target,a=[...s.classList],o=[...s.querySelectorAll("input")];o.pop();const i=o.map((t=>t.value));if(a.includes("new-project-form")){const t=new n(...i);e.emit("newUserProjectCreated",t)}if(a.includes("new-task-form")){const t=new d(...i),n=t.dueDate.split("-").map((t=>+t));n[1]--,t.dueDate=new Date(...n),e.emit("newTaskCreated",t)}c()}e.on("addProjectBtnClicked",s),e.on("addTaskBtnClicked",s)})(),function(){const t={},n={};let d=null;function c(t){d=t}e.on("staticProjectCreated",(function(n){t[n.title]=n,e.emit("staticProjectListUpdated",t)})),e.on("newUserProjectCreated",(function(t){n[t.title]=t,e.emit("userProjectListUpdated",n)})),e.on("projectBtnClicked",c),e.on("newTaskCreated",(function(t){t.originalProject=d,d.addTask(t)})),e.on("documentLoaded",c)}(),function(){const t={};e.on("newTaskCreated",(function(n){t[n.title]=n,e.emit("taskListUpdated",t)})),e.on("taskListUpdated",(function(){const n=new Date,d=Object.values(t);!function(t,n){const d=t.toDateString(),c=n.filter((t=>d===t.dueDate.toDateString()));e.emit("todaysTasksAssembled",c)}(n,d),function(t,n){const d=new Date(t.getFullYear(),t.getMonth(),t.getDate()),c=new Date,s=d.getDate()+6;c.setDate(s);const a=n.filter((t=>t.dueDate.getTime()<c.getTime()&&t.dueDate.getTime()>=d.getTime()));e.emit("thisWeeksTasksAssembled",a)}(n,d)}))}();const c=document.querySelector("main");let s;const a=function(t){s=t},o=function(t){const n=t.target;e.emit("addTaskBtnClicked",n)},i=function(){c.textContent="";const t=document.createElement("div"),e=s.title.replace(/\s/g,"-");t.classList.add(`${e}-container`),t.classList.add("project-container");const n=document.createElement("h2");n.textContent=s.title,t.appendChild(n);const d=document.createElement("div");d.classList.add("tasks-container"),t.appendChild(d);for(const t in s.tasks){const e=s.tasks[t],n=e.title.replace(/\s/g,"-"),c=document.createElement("div");c.classList.add("single-task-container");const a=document.createElement("div");a.classList.add("check-label-container");const o=document.createElement("input");o.setAttribute("type","checkbox"),o.classList.add("task-checkbox"),o.id=`${n}-checkbox`;const i=document.createElement("label");if(i.classList.add("task-label"),i.setAttribute("for",`${n}-checkbox`),i.textContent=e.title,a.appendChild(o),a.appendChild(i),c.appendChild(a),e.description){const t=document.createElement("div");t.classList.add("description-container");const n=document.createElement("button");n.classList.add("description-btn"),n.textContent="Show Description",n.addEventListener("click",(()=>{alert(d.textContent)})),t.appendChild(n);const d=document.createElement("p");d.classList.add("task-description"),d.textContent=e.description,c.appendChild(t)}const l=document.createElement("div");l.classList.add("due-date-container");const r=document.createElement("p");if(r.classList.add("task-due-date"),r.textContent=e.dueDate.toDateString(),l.appendChild(r),"Today"===s.title||"This week"===s.title){const t=document.createElement("p");t.classList.add("project-reminder"),console.log(e),t.textContent=e.originalProject.title,l.appendChild(t)}c.appendChild(l),d.appendChild(c)}if("Today"!==s.title&&"This week"!==s.title){const e=document.createElement("i");e.classList.add("fa"),e.classList.add("fa-plus");const n=document.createElement("button");n.classList.add("add-task-btn"),n.appendChild(e);const d=document.createTextNode(" Add Task");n.appendChild(d),n.addEventListener("click",o),t.appendChild(n)}c.appendChild(t)};e.on("documentLoaded",a),e.on("documentLoaded",i),e.on("projectBtnClicked",a),e.on("projectBtnClicked",i),e.on("newTaskCreated",i),function(){const t=document.querySelector("nav"),d=function(){const t=document.createElement("div");t.classList.add("static-nav");const d=function(t){const d=document.createElement("button"),c=document.createElement("i");let s;if(c.classList.add("fa"),"inbox"===t){d.classList.add("inbox"),c.classList.add("fa-inbox"),s=document.createTextNode(" Inbox");const t=new n("Inbox");e.emit("staticProjectCreated",t),e.emit("documentLoaded",t),d.project=t}if("today"===t){d.classList.add("today"),c.classList.add("fa-calendar-o"),s=document.createTextNode(" Today");const t=new n("Today");e.emit("staticProjectCreated",t),e.on("todaysTasksAssembled",(e=>{t.tasks=e})),d.project=t}if("this week"===t){d.classList.add("this-week"),c.classList.add("fa-calendar"),s=document.createTextNode(" This week");const t=new n("This week");e.emit("staticProjectCreated",t),e.on("thisWeeksTasksAssembled",(e=>{t.tasks=e})),d.project=t}return d.appendChild(c),d.appendChild(s),d.addEventListener("click",o),d},c=d("inbox"),s=d("today"),a=d("this week");return t.appendChild(c),t.appendChild(s),t.appendChild(a),t}();t.appendChild(d);const[c,s]=function(){const t=document.createElement("div");t.classList.add("projects-nav");const e=document.createElement("h3");e.textContent="Projects";const n=document.createElement("div");n.classList.add("user-projects");const d=document.createElement("button");d.classList.add("add-project-btn");const c=document.createElement("i");c.classList.add("fa"),c.classList.add("fa-plus");const s=document.createTextNode(" Add Project");return d.appendChild(c),d.appendChild(s),d.addEventListener("click",a),t.appendChild(e),t.appendChild(n),t.appendChild(d),[t,n]}();function a(t){const n=t.target;e.emit("addProjectBtnClicked",n)}function o(n){const d=n.target;t.querySelectorAll("button").forEach((t=>{t.classList.contains("selected")&&t.classList.remove("selected")})),d.classList.add("selected");const c=d.project;e.emit("projectBtnClicked",c)}function i(t){const e=document.createElement("button");return e.project=t,e.textContent=t.title,e.addEventListener("click",o),e}t.appendChild(c),e.on("userProjectListUpdated",(function(t){s.textContent="";for(const e in t){const n=i(t[e]);s.appendChild(n)}}))}(),e.printEvents()})();